(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,31713,e=>{"use strict";var a=e.i(43476),t=e.i(71645);function s(){return(0,a.jsxs)("div",{className:"p-4 border-b bg-white",children:[(0,a.jsx)("h1",{className:"text-xl font-semibold text-gray-900",children:"ðŸ§  Gist AI"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Dapatkan ringkasan cepat dari berita yang kamu baca."})]})}let r=async e=>{let a=await fetch("https://gemini-api-app-bice.vercel.app/api/chat/summarize",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({articleUrl:e})});if(!a.ok)throw Error("Gagal meringkas berita");return await a.json()},i=async(e,a)=>{let t=await fetch("https://gemini-api-app-bice.vercel.app/api/chat/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prompt:e,newsSummary:a})});if(!t.ok)throw Error("Gagal memproses chat");return await t.json()},n=async e=>{let a=new FormData;a.append("image",e);let t=await fetch("https://gemini-api-app-bice.vercel.app/api/chat/analyze-image",{method:"POST",body:a});if(!t.ok)throw Error("Gagal menganalisis gambar");return await t.json()};function l(){return(0,a.jsx)("div",{className:"flex justify-center items-center py-2",children:(0,a.jsx)("div",{className:"w-5 h-5 border-2 border-blue-500 border-t-transparent rounded-full animate-spin"})})}function d({currentUrl:e,onSummaryReady:s}){let[i,n]=(0,t.useState)(""),[d,c]=(0,t.useState)(!1),o=async()=>{c(!0);try{let a=await r(e);n(a.summary),s(a.summary)}catch(e){n("Gagal mengambil ringkasan.")}finally{c(!1)}};return(0,a.jsxs)("div",{className:"p-4 space-y-3",children:[(0,a.jsx)("p",{className:"text-xs text-gray-500 break-words",children:e}),(0,a.jsx)("button",{onClick:o,disabled:d,className:"w-full bg-blue-600 hover:bg-blue-700 text-white py-2 rounded-md",children:d?"Memproses...":"Ringkas Artikel"}),d&&(0,a.jsx)(l,{}),i&&(0,a.jsx)("div",{className:"bg-gray-50 border rounded-md p-3 text-sm text-gray-800 whitespace-pre-wrap    max-h-64 overflow-y-auto",children:i})]})}function c({summary:e}){let[s,r]=(0,t.useState)(""),[n,d]=(0,t.useState)([]),[c,o]=(0,t.useState)(!1),m=async()=>{if(!s.trim())return;let a=s.trim();r(""),d(e=>[...e,{sender:"user",message:a}]),o(!0);try{let t=await i(a,e);d(e=>[...e,{sender:"ai",message:t.response}])}catch{d(e=>[...e,{sender:"ai",message:"Terjadi kesalahan saat memproses."}])}finally{o(!1)}};return(0,a.jsxs)("div",{className:"bg-gray-50 border rounded-md p-3 text-sm text-gray-800 flex flex-col space-y-2",children:[(0,a.jsxs)("div",{className:"max-h-48 overflow-y-auto space-y-2",children:[n.map((e,t)=>(0,a.jsx)("div",{className:`p-2 rounded-md ${"user"===e.sender?"bg-blue-600 text-white self-end ml-auto max-w-[85%]":"bg-white border text-gray-800 max-w-[85%]"}`,children:e.message},t)),c&&(0,a.jsx)(l,{})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2 pt-2",children:[(0,a.jsx)("input",{value:s,onChange:e=>r(e.target.value),onKeyDown:e=>"Enter"===e.key&&m(),placeholder:"Tanyakan sesuatu...",className:"flex-1 border rounded-md px-3 py-1.5 text-sm outline-none"}),(0,a.jsx)("button",{onClick:m,disabled:c,className:"bg-blue-600 hover:bg-blue-700 text-white px-3 py-1.5 rounded-md text-sm",children:"Kirim"})]})]})}function o(){let[e,s]=(0,t.useState)(null),[r,i]=(0,t.useState)(null),[l,d]=(0,t.useState)(""),[c,o]=(0,t.useState)(!1),m=async()=>{if(e){o(!0),d("");try{let a=await n(e);d(a.analysis)}catch(e){d("Gagal menganalisis gambar.")}finally{o(!1)}}};return(0,a.jsxs)("div",{className:"p-4 space-y-3 bg-gray-50 rounded-md border",children:[(0,a.jsx)("h3",{className:"text-sm font-medium",children:"Analisis Gambar ðŸ§ "}),(0,a.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{let a=e.target.files?.[0];a&&(s(a),i(URL.createObjectURL(a)))}}),r&&(0,a.jsx)("img",{src:r,alt:"preview",className:"w-full rounded-md border object-contain max-h-40"}),(0,a.jsx)("button",{onClick:m,disabled:!e||c,className:"w-full bg-blue-600 hover:bg-blue-700 text-white py-2 rounded-md",children:c?"Menganalisis...":"Analisis Gambar"}),l&&(0,a.jsx)("div",{className:"bg-white border rounded-md p-3 text-sm text-gray-800 whitespace-pre-wrap max-h-48 overflow-y-auto",children:l})]})}function m(){let[e,r]=(0,t.useState)(""),[i,n]=(0,t.useState)("");return(0,t.useEffect)(()=>{"undefined"!=typeof chrome&&chrome.tabs?chrome.tabs.query({active:!0,currentWindow:!0},e=>{let a=e[0]?.url;a?r(a):n("Silakan mulai percakapan dengan Gist AI di sini.")}):(r("https://money.kompas.com/read/2025/10/31/103849226/prabowo-perintahkan-purbaya-airlangga-dan-danantara-cari-solusi-utang-kereta?source=headline"),n("Silakan mulai percakapan dengan Gist AI di sini."))},[]),(0,a.jsxs)("div",{className:"w-[400px] h-[600px] bg-white flex flex-col border rounded-md overflow-hidden",children:[(0,a.jsx)(s,{}),(0,a.jsxs)("div",{className:"flex-1 overflow-y-auto px-4 py-3 space-y-4",children:[(0,a.jsx)(d,{currentUrl:e,onSummaryReady:n}),i&&(0,a.jsx)(c,{summary:i}),(0,a.jsx)(o,{})]})]})}e.s(["default",()=>m],31713)}]);